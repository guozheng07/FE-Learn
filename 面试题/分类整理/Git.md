# 1 说说你对版本管理的理解？常用的版本管理工具有哪些？
## 1.1 是什么
- 版本控制是一种软件工程技巧，借此能在软件开发的过程中，确保由不同人所编写的同一程序文件都得到同步。
- 通过文档控制，能记录任何工程项目内各个模块的改动历程，并为每次改动编上序号。
- 版本控制能提供项目的设计者，将设计恢复到之前任一状态的选择权。
## 1.2 有哪些
1. 本地版本控制系统
- 优：适合管理文本，如系统配置
- 缺：不支持远程操作，不适合多人版本开发
2. 集中式版本控制系统：SVN、CVS

存在一个单一的中央服务器，所有的版本历史和文件数据都存储在这个中央服务器上。开发人员需要从中央服务器拉取数据，并在修改之后提交回中央服务器。
- 优：适合多人团队协作开发；代码集中化管理
- 缺：单点故障；必须联网，无法单机工作
3. 分布式版本控制系统：Git、HG

每个开发人员的工作空间都会有一个完整的代码库的拷贝，包括完整的历史版本记录。这些本地仓库之间可以通过网络进行交互，但每一个本地仓库都是一个独立的版本控制系统。
- 优：适合多人团队协作开发；代码集中化管理；**可以离线工作**；**每个计算机都是一个完整仓库**

使用 Git 时，常见的工作流程涉及以下几个步骤：
- 工作区：开发者在这里进行实际的代码修改。它是**当前目录下可见的文件和文件夹**。
- 暂存区：修改完成后，可以通过 git add <file> 将修改从工作区添加到暂存区。暂存区**是一个集合区域，保存了将要提交到本地仓库的快照**。
- 本地仓库：使用 git commit -m "message" 命令**提交暂存区的快照到本地仓库，记录一系列历史版本**。
- 远程仓库：使用 git push <remote> <branch> 命令，**将本地仓库的提交上传到远程仓库**，便于其他开发者进行协作。
- 同步远程变更：使用 git pull 或 git fetch 命令，**从远程仓库获取最新的提交并合并到本地**。

```
# 克隆远程仓库到本地
git clone <repository-url>

# 创建并切换到一个新的分支
git checkout -b new-feature

# 修改代码并查看状态
git status

# 将修改添加到暂存区
git add .

# 提交进本地仓库
git commit -m "Add new feature"

# 从远程仓库获取并合并最新的变更
git pull origin main

# 将本地分支推送到远程仓库
git push origin new-feature
```

git pull
- **git pull 是一个组合命令，它实际上是 git fetch 和 git merge 的组合**。执行 git pull 后，会先从远程仓库拉取最新的提交，然后将这些提交合并到当前所在的分支。
- 如果不指定分支名称，**git pull 会默认拉取当前分支所在的远程分支**。

git status时，文件可能处于以下几种状态之一：
- 新文件（Untracked Files）：这些文件是你在工作区中新创建的，但还没有被 Git 追踪管理。这种状态指示这些文件还没有被添加到暂存区。
- 已暂存修改（Changes to be committed）：这些文件的修改已经被添加到暂存区，准备下一步提交。这些文件将被包含在下一次 git commit 中。
- 未暂存修改（Changes not staged for commit）：这些文件是工作区中的文件经过修改，但尚未添加到暂存区。需要使用 git add 命令将它们添加到暂存区。
- 删除文件（Deleted files）：这些文件在工作区中已经被删除，但删除操作还没有被添加到暂存区。需要使用 git rm 或 git add 命令将删除操作添加到暂存区。
- 已暂存的删除（Removed files to be committed）：这些文件的删除操作已经被添加到暂存区，将被包含在下一次提交中。
- 合并冲突（Unmerged paths）：在进行合并操作时，可能会遇到文件冲突，这时文件会显示为冲突状态，需要手动解决冲突。

# 2 说说你对Git的理解？
## 2.1 是什么
- git，是一个分布式版本控制软件，最初目的是为更好地管理Linux内核开发而设计。
- 分布式版本控制系统的客户端不止提取最新版本的文件快照，而是把代码仓库完整地镜像下来。
## 2.2 实现原理
![image](https://github.com/user-attachments/assets/6b6b212c-3da4-478a-8b76-c2dda4aed133)

1. 通过git init创建或git clone一个项目时，**项目目录会隐藏一个.git子目录，作用是用来跟踪管理版本库的**。
2. **Git中所有数据在存储前都计算校验和，然后以校验和来引用**，所以在修改和删除文件时，git能知道。
   - Git用以计算校验和的机制叫SHA-1散列（hash），这是一个由40个十六进制字符组成字符串，基于Git中文件的内容或目录结构计算出来。
3. 当修改文件时，git会修改文件的状态（已修改、已暂存、已提交）
4. 不同状态的文件在Git中处于不同的工作区域（工作区、暂存区、本地仓库、远程仓库）

## 2.3 `.git` 目录结构
以下是 `.git` 目录中常见的子目录和文件的详细介绍：
1. HEAD
   - 一个文件，指向当前所在的分支的最新提交。例如，内容可能是 `ref: refs/heads/main`，这表示当前分支是 `main`。
2. config
   - 仓库的配置文件，包含了本地和远程仓库的设置，包括远程仓库地址等。
3. description
   - 仅供 Gitweb 之类的工具使用的描述文件。对于纯 Git 操作，这个文件基本无用。
4. hooks
   - 这个目录包含客户端或服务端的钩子脚本。钩子脚本在特定事件触发时运行，比如 `pre-commit`、`post-commit` 等。
5. index
   - 索引文件，也称为暂存区，它保存了所有暂存的文件记录。
6. info
   - 包含两个子文件：`exclude` 文件，可以在这里定义排除的文件模式，相当于全局的 `.gitignore`。
7. logs
   - 这个目录包含所有引用（refs）的日志文件，记录了每一个引用（分支、标签等）的变化历史。
8. objects
   - 这个目录存储所有的数据对象，包括提交对象（commit）、树对象（tree）和数据对象（blob）。所有文件历史记录都存储在这个目录中的子目录和文件里。
9. refs
   - 这个目录包含所有的引用（分支、标签等），结构通常是 `heads`（分支）、`tags`（标签）和 `remotes`（远程分支）。

以下是 `.git` 目录的一个可能的样例结构：
```
.git
├── HEAD
├── config
├── description
├── hooks
│   ├── applypatch-msg.sample
│   ├── ...
├── index
├── info
│   └── exclude
├── logs
│   ├── HEAD
│   └── refs
│       ├── heads
│       │   └── main
│       ├── remotes
│       │   └── origin
│       │       └── main
├── objects
│   ├── 01
│   │   └── d5f8e6f1
│   ├── ...
├── refs
│   ├── heads
│   │   └── main
│   ├── tags
│   └── remotes
│       └── origin
│           └── main
```
